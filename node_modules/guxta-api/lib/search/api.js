const axios = require("axios");
const cheerio = require("cheerio");
const request = require('request');

function assistitht(nome) {
return new Promise((resolve, reject) => {
axios.get(`https://www.assistirhentai.com/?s=${nome}`).then( tod => {
const $ = cheerio.load(tod.data)  
var postagem = [];
$("div.videos").each((_, say) => {
var nome = $(say).find("h2").text().trim(); 
var img = $(say).find("img").attr('src');
var link = $(say).find("a").attr('href');
var data_up = $(say).find("span.video-data").text().trim(); 
var tipo = $(say).find("span.selo-tipo").text().trim();     
var eps = $(say).find("span.selo-tempo").text().trim();         
var resultado = {
nome: nome,
img: img,
link: link,
data_up: data_up,
tipo: tipo,
total_ep: eps
}
postagem.push(resultado)
})
resolve(postagem)
}).catch(reject)
});
}

function assistithtdl(link) {
return new Promise((resolve, reject) => {
axios.get(`${link}`).then( tod => {
const $ = cheerio.load(tod.data)  
var postagem = [];
$("div.meio").each((_, say) => {
var nome = $(say).find("h1.post-titulo").text().trim(); 
var img = $(say).find("img").attr('src');
var descrição = $(say).find("p").text().trim(); 
var link = $(say).find("source").attr('src');
var resultado = {
nome: nome,
capa: img,
descrição: descrição,
link_dl: link
}
postagem.push(resultado)
})
resolve(postagem)
}).catch(reject)
});
}

function pornogratis(nome) {
return new Promise((resolve, reject) => {
axios.get(`https://pornogratis.vlog.br/?s=${nome}`).then( tod => {
const $ = cheerio.load(tod.data)  
var postagem = [];
$("div.videos-row").each((_, say) => {
var nome = $(say).find("a").attr('title');
var img = $(say).find("img").attr('src');
var link = $(say).find("a").attr('href');
var resultado = {
nome: nome,
img: img,
link: link
}
postagem.push(resultado)
})
resolve(postagem)
}).catch(reject)
});
}

function pornhub(nome) {
return new Promise((resolve, reject) => {
axios.get(`https://pt.pornhub.com/video/search?search=${nome}`).then( tod => {
const $ = cheerio.load(tod.data)  
var postagem = [];
$("li.pcVideoListItem.js-pop.videoblock.videoBox").each((_, say) => {
var titulo = $(say).find("a").attr('title');
var link = $(say).find("a").attr('href');
var img = $(say).find("img").attr('data-thumb_url');
var duração = $(say).find("var.duration").text().trim();
var qualidade = $(say).find("span.hd-thumbnail").text().trim();
var autor = $(say).find("div.usernameWrap").text().trim();    
var visualizações = $(say).find("span.views").text().trim();    
var data_upload = $(say).find("var.added").text().trim();        
var hype = $(say).find("div.value").text().trim();    
var link2 = `https://pt.pornhub.com${link}`
var resultado = {
titulo: titulo,
img: img,
duração: duração,
qualidade: qualidade,
autor: autor,
visualizações: visualizações,
data_upload: data_upload,
hype: hype,
link: link2
}
postagem.push(resultado)
})
resolve(postagem)
}).catch(reject)
});
}

function hentaistube(nome) {
return new Promise((resolve, reject) => {
axios.get(`https://www.hentaistube.com/buscar/?s=${nome}`).then( tod => {
const $ = cheerio.load(tod.data)  
var postagem = [];
$("div.epiItem").each((_, say) => {
var titulo = $(say).find("div.epiItemNome").text().trim();
var link = $(say).find("a").attr('href');
var img = $(say).find("img").attr('src');
var resultado = {
titulo: titulo,
link: link,
img: img
}
postagem.push(resultado)
})
resolve(postagem)
}).catch(reject)
});
}

module.exports = { hentaistube, pornhub, assistithtdl, assistitht, pornogratis }